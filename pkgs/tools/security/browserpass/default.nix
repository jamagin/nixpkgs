# This file was generated by https://github.com/kamilchm/go2nix v1.2.0
{ stdenv, buildGoPackage, fetchgit, fetchhg, fetchbzr, fetchsvn }:

buildGoPackage rec {
  name = "browserpass-unstable-${version}";
  version = "HEAD";
  rev = "HEAD";

  goPackagePath = "github.com/dannyvankooten/browserpass";

  src = fetchgit {
    inherit rev;
    url = "https://github.com/dannyvankooten/browserpass";
  };

  postInstall = ''
      host_file="$bin/bin/browserpass"
      mkdir -p "$bin/etc"

      sed -e "s!%%replace%%!$host_file!" go/src/${goPackagePath}/chrome/host.json > chrome-host.json
      sed -e "s!%%replace%%!$host_file!" go/src/${goPackagePath}/firefox/host.json > firefox-host.json

      install -D chrome-host.json $bin/etc/chrome-host.json
      install -D firefox-host.json $bin/etc/firefox-host.json
  '';

  meta = {
    description = "A Chrome & Firefox extension for zx2c4's pass";
    longDescription = "";
    homepage = "https://github.com/dannyvankooten/browserpass";
    license = stdenv.lib.licenses.mit;
    platforms = stdenv.lib.platforms.linux ++ stdenv.lib.platforms.darwin;
  };
}